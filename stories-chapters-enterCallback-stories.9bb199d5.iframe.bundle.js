"use strict";(self.webpackChunkreact_in_viewport=self.webpackChunkreact_in_viewport||[]).push([[129],{"./src/stories/chapters/enterCallback.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ClassBaseComponent:()=>ClassBaseComponent,FunctionalComponent:()=>FunctionalComponent,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.mjs"),lodash_omit__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/lodash/omit.js"),lodash_omit__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash_omit__WEBPACK_IMPORTED_MODULE_1__),_index__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/index.ts"),_common_themeComponent__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/stories/common/themeComponent.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");const ViewportBlock=(0,_index__WEBPACK_IMPORTED_MODULE_2__.Ay)(_common_themeComponent__WEBPACK_IMPORTED_MODULE_3__.eB,{},{disconnectOnLeave:!1}),ViewportAnchor=(0,_index__WEBPACK_IMPORTED_MODULE_2__.Ay)((({forwardedRef,inViewport,...restProps})=>{const text=inViewport?"Link (in viewport)":"Link (not in viewport)";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("a",{href:"https://github.com/roderickhsiao/react-in-viewport#readme",...lodash_omit__WEBPACK_IMPORTED_MODULE_1___default()(restProps,_index__WEBPACK_IMPORTED_MODULE_2__.gr),ref:forwardedRef,style:{padding:"20px 0"},children:text})}),{},{disconnectOnLeave:!1}),__WEBPACK_DEFAULT_EXPORT__={title:"Enter Callback",component:ViewportBlock,decorators:[Story=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_common_themeComponent__WEBPACK_IMPORTED_MODULE_3__.sT,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_common_themeComponent__WEBPACK_IMPORTED_MODULE_3__.hK,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{style:{padding:"20px",maxWidth:"400px"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Story,{})})]})]},ClassBaseComponent=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(ViewportBlock,{onEnterViewport:()=>(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.XI)("callback")("onEnterViewport"),onLeaveViewport:()=>(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.XI)("callback")("onLeaveViewport")}),FunctionalComponent=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(ViewportAnchor,{onEnterViewport:()=>(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.XI)("callback")("onEnterViewport"),onLeaveViewport:()=>(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.XI)("callback")("onLeaveViewport")}),__namedExportsOrder=["ClassBaseComponent","FunctionalComponent"];ClassBaseComponent.parameters={...ClassBaseComponent.parameters,docs:{...ClassBaseComponent.parameters?.docs,source:{originalSource:"() => {\n  return <ViewportBlock onEnterViewport={() => action('callback')('onEnterViewport')} onLeaveViewport={() => action('callback')('onLeaveViewport')} />;\n}",...ClassBaseComponent.parameters?.docs?.source}}},FunctionalComponent.parameters={...FunctionalComponent.parameters,docs:{...FunctionalComponent.parameters?.docs,source:{originalSource:"() => {\n  return <ViewportAnchor onEnterViewport={() => action('callback')('onEnterViewport')} onLeaveViewport={() => action('callback')('onLeaveViewport')} />;\n}",...FunctionalComponent.parameters?.docs?.source}}}},"./src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{gr:()=>customProps,Ay:()=>src,bd:()=>lib_handleViewport});var react=__webpack_require__("./node_modules/react/index.js"),hoist_non_react_statics_cjs=__webpack_require__("./node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js"),hoist_non_react_statics_cjs_default=__webpack_require__.n(hoist_non_react_statics_cjs),defaultOptions={},defaultConfig={disconnectOnLeave:!1},noop=function noop(){},defaultProps={onEnterViewport:noop,onLeaveViewport:noop},defaultMutationObserverOption={attributes:!0,childList:!0,subtree:!0};const lib_useInViewport=function useInViewport(target,options,config,props){void 0===options&&(options=defaultOptions),void 0===config&&(config=defaultConfig),void 0===props&&(props=defaultProps);var _props=props,onEnterViewport=_props.onEnterViewport,onLeaveViewport=_props.onLeaveViewport,forceUpdate=(0,react.useState)()[1],observer=(0,react.useRef)(void 0),inViewportRef=(0,react.useRef)(!1),intersected=(0,react.useRef)(!1),enterCountRef=(0,react.useRef)(0),leaveCountRef=(0,react.useRef)(0),_useState2=(0,react.useState)(Boolean(target.current)),isTargetReady=_useState2[0],setIsTargetReady=_useState2[1];var handleIntersection=function handleIntersection(entries){var entry=entries[0]||{},isIntersecting=entry.isIntersecting,intersectionRatio=entry.intersectionRatio,isInViewport=void 0!==isIntersecting?isIntersecting:intersectionRatio>0;if(!intersected.current&&isInViewport)return intersected.current=!0,null==onEnterViewport||onEnterViewport(),enterCountRef.current+=1,inViewportRef.current=isInViewport,void forceUpdate(isInViewport);intersected.current&&!isInViewport&&(intersected.current=!1,null==onLeaveViewport||onLeaveViewport(),config.disconnectOnLeave&&observer.current&&observer.current.disconnect(),leaveCountRef.current+=1,inViewportRef.current=isInViewport,forceUpdate(isInViewport))};return(0,react.useEffect)((function(){var observerRef=observer.current;return function startObserver(_ref){var observerRef=_ref.observerRef,targetRef=target.current;if(targetRef){var node=targetRef;node&&(null==observerRef||observerRef.observe(node))}}({observerRef:observerRef=function initIntersectionObserver(_ref3){var observerRef=_ref3.observerRef;return observerRef||(observer.current=new IntersectionObserver(handleIntersection,options),observer.current)}({observerRef})}),function(){!function stopObserver(_ref2){var observerRef=_ref2.observerRef,targetRef=target.current;if(targetRef){var node=targetRef;node&&(null==observerRef||observerRef.unobserve(node))}null==observerRef||observerRef.disconnect(),observer.current=null}({observerRef})}}),[target.current,options,config,onEnterViewport,onLeaveViewport]),(0,react.useEffect)((function(){var currentElement=target.current,mutationObserver=null;return currentElement?setIsTargetReady(!0):(mutationObserver=new MutationObserver((function handleOnChange(){target.current&&!isTargetReady&&(setIsTargetReady(!0),mutationObserver&&mutationObserver.disconnect())}))).observe(document.body,defaultMutationObserverOption),function(){mutationObserver&&mutationObserver.disconnect()}}),[target.current]),{inViewport:inViewportRef.current,enterCount:enterCountRef.current,leaveCount:leaveCountRef.current}};var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["onEnterViewport","onLeaveViewport"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const lib_handleViewport=function handleViewport(TargetComponent,options,config){void 0===options&&(options=defaultOptions),void 0===config&&(config=defaultConfig);var ForwardedRefComponent=(0,react.forwardRef)((function(props,ref){var refProps={forwardedRef:ref};return(0,jsx_runtime.jsx)(TargetComponent,_extends({},props,refProps))})),InViewport=function InViewport(_ref){var _ref$onEnterViewport=_ref.onEnterViewport,onEnterViewport=void 0===_ref$onEnterViewport?noop:_ref$onEnterViewport,_ref$onLeaveViewport=_ref.onLeaveViewport,onLeaveViewport=void 0===_ref$onLeaveViewport?noop:_ref$onLeaveViewport,restProps=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.includes(n))continue;t[n]=r[n]}return t}(_ref,_excluded),node=(0,react.useRef)(null),_useInViewport=lib_useInViewport(node,options,config,{onEnterViewport,onLeaveViewport}),props=_extends({},restProps,{inViewport:_useInViewport.inViewport,enterCount:_useInViewport.enterCount,leaveCount:_useInViewport.leaveCount});return(0,jsx_runtime.jsx)(ForwardedRefComponent,_extends({},props,{ref:node}))},name=TargetComponent.displayName||TargetComponent.name||"Component";return InViewport.displayName="handleViewport("+name+")",hoist_non_react_statics_cjs_default()(InViewport,ForwardedRefComponent)};var customProps=["inViewport","enterCount","leaveCount"];const src=lib_handleViewport},"./src/stories/common/themeComponent.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Zp:()=>Card,eB:()=>Block,hK:()=>Spacer,sT:()=>PageTitle});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}var PageTitle=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)((function(_ref){var _ref$title=_ref.title,title=void 0===_ref$title?"React In Viewport":_ref$title,_ref$description=_ref.description,description=void 0===_ref$description?"Wrapper component to detect if the component is in viewport using Intersection Observer API":_ref$description;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:"page__title",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("h1",{className:"page__title-main",children:[title,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("a",{className:"github mui-icon",href:"https://github.com/roderickhsiao/react-in-viewport",target:"_blank",rel:"noopener noreferrer",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{style:{visibility:"hidden"},children:"Github"})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("p",{className:"page__title-desc",children:description})]})}));PageTitle.displayName="PageTitle";var Card=function(_React$PureComponent){function Card(){return _React$PureComponent.apply(this,arguments)||this}return function _inheritsLoose(t,o){t.prototype=Object.create(o.prototype),t.prototype.constructor=t,_setPrototypeOf(t,o)}(Card,_React$PureComponent),Card.prototype.render=function render(){var _this$props=this.props,titleText=_this$props.titleText,contentNode=_this$props.contentNode;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:"card",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"card__head",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("h3",{className:"card__title",children:titleText})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"card__conent",children:contentNode})]})},Card}(react__WEBPACK_IMPORTED_MODULE_0__.PureComponent);Card.displayName="Card";var Block=function Block(props){var inViewport=props.inViewport,enterCount=props.enterCount,leaveCount=props.leaveCount,forwardedRef=props.forwardedRef,color=inViewport?"#217ac0":"#ff9800",text=inViewport?"In viewport":"Not in viewport";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Card,{titleText:text,contentNode:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{ref:forwardedRef,title:"Enter viewport "+enterCount+" times, leave viewport "+leaveCount+" times",style:{width:"100%",height:"300px",background:color,transitionDuration:"1s"}})})};Block.displayName="Block";var Spacer=function Spacer(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{style:{height:"100vh",padding:"20px"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("p",{children:["Scroll down to make component in viewport"," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{role:"img","aria-label":"down",children:"👇"})," "]})})};Spacer.displayName=Spacer,PageTitle.__docgenInfo={description:"",methods:[],displayName:"PageTitle",props:{title:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'React In Viewport'",computed:!1}},description:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Wrapper component to detect if the component is in viewport using Intersection Observer API'",computed:!1}}}},Card.__docgenInfo={description:"",methods:[],displayName:"Card",props:{titleText:{required:!0,tsType:{name:"string"},description:""},contentNode:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}},Block.__docgenInfo={description:"",methods:[],displayName:"Block",props:{inViewport:{required:!0,tsType:{name:"boolean"},description:""},enterCount:{required:!0,tsType:{name:"number"},description:""},leaveCount:{required:!0,tsType:{name:"number"},description:""},forwardedRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"TElement"}],raw:"RefObject<TElement>"},description:""}}},Spacer.__docgenInfo={description:"",methods:[{name:"displayName",docblock:null,modifiers:["static"],params:[],returns:null}]}}}]);